<!DOCTYPE html>
<html>
  <head>
     <title>ICODE-MDA Maps</title>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
     <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

     <!-- Custom CSS styling -->
     <link rel="stylesheet" type="text/css" href="css/mapstyle.css">

     <!-- JQuery from Google APIs-->
     <script type="text/javascript" language="Javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
     <script>window.jQuery || document.write('<script src="scripts/jquery.min.js"><\/script>')</script>

     <!-- ArcGIS Maps API -->
     <link rel="stylesheet" href="http://js.arcgis.com/3.11/dijit/themes/claro/claro.css">
     <link rel="stylesheet" href="http://js.arcgis.com/3.11/esri/css/esri.css">

     <script src="http://js.arcgis.com/3.11/"></script>

     <!-- Bootstrap (getbootstrap.com) and Bootstrap-map-js (github.com/esri/bootstrap-map-js) -->
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
     <link rel="stylesheet" href="css/bootstrapmap.css">

     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

     <!-- Google Webfonts -->
     <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'  type='text/css'>


     <script>
        //Select all text if query bar comes into focus
        $(document).ready(function() {
           //Query bar text control
           $('#query:text').focus(function() { 
              $(this).one('mouseup', function(event){
                 event.preventDefault();
              }).select();
           });

           //Geocoding text box control
           $('#geocodeAddress').focus(function() { 
              $(this).one('mouseup', function(event){
                 event.preventDefault();
              }).select();
           });

           //Control the behavior of legend menu clicking
           $('#legend-heading').on('click', function() {
              if ($('#legend-icon').hasClass('glyphicon-chevron-up')) {
                 $('#legend-icon').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
                 $('#legend-body').removeClass('in');
              }
              else {
                 $('#legend-icon').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
                 $('#legend-body').addClass('in');
              }
           });
        });
     </script>

     <!-- 
     <script>
        $(document).ready(function() {
           NProgress.configure({ 
              ease: 'ease', 
              trickleRate: 0.02,
              trickleSpeed: 50,
              showSpinner: false,
              minimum: 0.3,
           });
        });
     </script>
     -->
     <script>
        //Main userid global setting
        var userid = 'icodeuser';   //temporarily set to icodeuser for testing

        $(document).ready(function() {
           $('#username').text(userid);
           /*
           $('#login_nav')
           .mouseover(function() {
              $('#loginarrow').hide();
              $('#loginusername').text(userid);
              $('#loginusername').show();
           })
           .mouseout(function() {
              $('#loginarrow').show();
              $('#loginusername').hide();
           })
           ;
           */
        });
     </script>

     <!-- Main JavaScript for controlling map -->
     <script type="text/javascript" src="scripts/icode-maps.js"></script>

  </head>
  <body class="claro" onload="initialize()">

     <!-- NAVBAR ===================================================================== -->
     <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
     <div class="container">
        <!-- Brand and collapse button -->
        <div class="navbar-header">
           <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
           </button>
           <a class="navbar-brand" href="#">ICODE-MDA Maps</a>
        </div>

        <!-- Search and other navigation items -->
        <div id="navbar" class="navbar-collapse collapse">
           <!-- Search bar -->
           <form class="navbar-form navbar-nav">
              <div class="form-group" style="width:100%">
                 <div class="input-group">
                    <span class="input-group-addon"><span id="search-icon" class="glyphicon glyphicon-search"></span></span>
                    <input id="query" class="form-control" type="text" name="query" onkeypress="if (event.which == 13) {enteredQuery();return false;}" value="QUERY RUNNING..." autofocus="autofocus"><input hidden="true" type="hidden">
                 </div>
              </div>
           </form>

           <!-- Navigation items -->
           <ul class="nav navbar-nav navbar-right">
              <li><a href="#">SQL Query</a></li>
              <li class="dropdown">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown">Alerts<span class="caret"></span></a>
                 <ul class="dropdown-menu" role="menu">
                    <li><a href="#">View Alerts</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Setup New Alerts</a></li>
                    <li><a href="#">Edit Alerts</a></li>
                 </ul>
              </li>
              <li class="dropdown">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="username"></span><span class="caret"></span></a>
                 <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Settings</a></li>
                    <li><a href="#">Logout</a></li>
                 </ul>
              </li>              
           </ul>
        </div>
     </div>
     </nav>


     <!-- MAP CANVAS ===================================================================== -->
     <div class="container">
        <div id="map-container">
           <!-- BEGIN MAP AREA -->
           <div id="mapDiv">
           </div>
           <!-- END MAP AREA -->
        </div>
     </div>


     <!-- MENU PANEL ===================================================================== -->
     <div class="container">
        <div id="menuDiv" class="panel panel-primary panel-fixed">
           <div id="legend-heading" class="panel-heading">
              <h3 class="panel-title">Legend</h3>
              <button id="chevron" class="btn btn-primary btn-xs btn-absolute">          
                 <span id="legend-icon" class="glyphicon glyphicon-chevron-up"></span>
              </button>
           </div>
           <div id="legend-body" class="panel-body collapse in text-left">
              <h4 class="text-center">Vessel Types</h4>
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
              <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#3333FF;stroke:#3333FF;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
              </path>
              </svg>
              LAISIC AIS Observation
              <br>

              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="20" width="30" viewBox="-5 -10 20 20">
              <path d="m -6 0 6 -6 6 6 -6 6 z m 12 0 l 8 0" style="fill:#FFFF00;stroke:#222222;stroke-width:1;fill-rule:evenodd;">Browser does not support inline SVG.
              </path>
              </svg>
              LAISIC AIS Track
              <br>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="radarvessels" name="radarvessels" checked="checked" type="checkbox" onclick="refreshMaps(true);">
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="16" width="30" viewBox="-6 -12 15 16">
                    <path d="M 0, -3 m -6, 0 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0 m 8 0 l 10 0" style="fill:#F078FF;stroke:#222200;stroke-width:1;fill-rule:evenodd;">Browser does not support inline SVG.
                    </path>
                    </svg>
                    RADAR Vessels
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="livelaisic" name="livelaisic" checked="checked" type="checkbox" onclick="refreshMaps(true);">
                    <svg width="26" height="15" version="1.1" xmlns="https://svgwg.org/svg2-draft/"  viewBox="0 3 20 10"><path d="M 12,0 22,15 19,21 12,24 6,21 3,15 Z" fill="#FF0000" stroke="#000000" stroke-width="3" transform="rotate(90 6 6) scale(0.5) translate(5 -4)"></path></svg>
                    Live LAISIC Correlations
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxallships" id="All Other Vessels" name="All Other Vessels" checked="false" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#444444;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    All Other Vessels
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="0-Unspecified Ships" name="0-Unspecified Ships" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#F78181;stroke:#780202;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    0 - Unspecified Ships<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="30-Fishing" name="30-Fishing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DFD7;stroke:#006058;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    30 - Fishing<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="31-Towing" name="31-Towing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    31 - Towing<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="32-Big Tow" name="32-Big Tow" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    32 - Big Tow<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="35-Military" name="35-Military" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#0000FF;stroke:#000080;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    35 - Military<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="37-Pleasure Craft" name="37-Pleasure Craft" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#8904B1;stroke:#0a0032;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    37 - Pleasure Craft<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="51-Search and Rescue" name="51-Search and Rescue" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#BE3C14;stroke:#3f0000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    51 - Search & Rescue<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="52-Tug" name="52-Tug" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    52 - Tug<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="33-Dredge" name="33-Dredge" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    33 - Dredge<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="50-Pilot" name="50-Pilot" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    50 - Pilot<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="55-Law Enforcement" name="55-Law Enforcement" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#0000FF;stroke:#000080;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    55 - Law Enforcement<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="6x-Passenger Vessels" name="6x-Passenger Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    6x - Passenger Vessels<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="7x-Cargo Vessels" name="7x-Cargo Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    7x - Cargo Vessels<br>
                 </label>
              </div>
              <div class="checkbox">
                 <label>
                    <input class="checkboxtype" id="8x-Tankers" name="8x-Tankers" checked="checked"  type="checkbox" onclick="typeSelectUpdated();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                    </path>
                    </svg>
                    8x - Tankers<br>
                 </label>
              </div>
              <hr>

              <h4 class="text-center">AIS Sources</h4>
              <form role="form">
                 <div><label><input type="radio" id="allaissources" name="aissources" checked="checked" onclick="refreshMaps(true);"> All AIS Sources</label></div>
                 <div><label><input type="radio" id="mssisonly" name="aissources" onclick="refreshMaps(true);"> Terrestrial AIS Only</label></div>
                 <div><label><input type="radio" id="sataisonly" name="aissources" onclick="refreshMaps(true);"> Satellite AIS Only</label></div>
              </form>

              <hr>
              <h4 class="text-center">Risk Level</h4>
              <form role="form">
                 <label><input type="checkbox" id="Risk" name="Risk" onclick="toggleRisk();refreshMaps(true);"> Enable risk information</label>
              </form>
              <label>Vessel Outline:</label><br>
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
              <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#00F014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
              </path>
              </svg>
              Low Risk<br>
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
              <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#F0FF78;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
              </path>
              </svg>
              Medium Risk<br>
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
              <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#FF0014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
              </path>
              </svg>
              High Risk<br>
           </div>
        </div> <!-- END menuDiv -->
     </div> <!-- END container -->


     <!-- OTHER ELEMENTS ===================================================================== -->

     <div id="keyboard-shortcut-modal" title="Keyboard Shortcuts">
        <p>
        <pre>
           <b>?</b>&#9;&#9; Display this shortcut dialog box<br>
           <b>Spacebar</b>&#9; Refresh targets in current view<br>
           <b>A</b>&#9;&#9; Toggle auto-refresh targets<br>
           <b>C</b>&#9;&#9; Clear all tracks<br>
           <b>G</b>&#9;&#9; Toggle clustering<br>
           <b>H</b>&#9;&#9; Hide/show menu panel<br>
           <b>L</b>&#9;&#9; Toggle LAISIC/AIS targets<br>
           <b>N</b>&#9;&#9; Toggle showing vessel names<br>
           <b>P</b>&#9;&#9; Toggle port layer<br>
           <b>Q</b>&#9;&#9; Select the query bar<br>
           <b>R</b>&#9;&#9; Refresh browser<br>
           <b>W</b>&#9;&#9; Toggle weather layer<br>
           <b>-</b>&#9;&#9; Zoom out<br>
           <b>+</b>&#9;&#9; Zoom in<br>
           <b>Arrows keys</b>&#9; Pan around map<br>
           <b>ESC</b>&#9;&#9; Close this dialog box<br></pre>
        </p>
     </div>

     <form role="form">
        <div id="geocodepanel" class="form-group">
           <div class="input-group">
              <input id="geocodeAddress" class="form-control" type="textbox" placeholder="San Diego, CA">
              <span class="input-group-btn">
                 <input type="button" class="btn btn-success" value="Set Map Center" onclick="codeAddress()">
              </span>
           </div>
        </div>
     </form>

  </body>
</html>

