<!DOCTYPE html>
<html>
  <head>
     <title>ICODE-MDA Maps</title>
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

     <link rel="stylesheet" type="text/css" href="css/mapstyle.css">
     <link rel="stylesheet" type="text/css" href="css/mapstyle-mobile.css" media="only screen and (max-device-width: 480px)">
     <link rel="stylesheet" type="text/css" href="css/alert.css">
	 
	 <!-- Email Alerts -->
     <script type="text/javascript" src="scripts/setup-alerts.js"></script>

	 <!-- OWF library -->
	 <script type="text/javascript" src="/ICODEMDAMaps-Julie/owf/js-min/owf-widget-debug.js"></script>
	  
     <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry,drawing,weather,visualization&sensor=false"> </script>
     <script type="text/javascript" src='scripts/infobubble.js' ></script>

     <script type="text/javascript" language="Javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
     <script>window.jQuery || document.write('<script src="scripts/jquery.min.js"><\/script>')</script>


     <!-- <link href='http://fonts.googleapis.com/css?family=Lato:400,900' rel='stylesheet' type='text/css'> -->

     <!-- script type="text/javascript" src='scripts/fade.js' ></script -->

     <script type="text/javascript" src="scripts/ihs-table.js"></script>

     <script type="text/javascript" src="scripts/distanceWidget.js"></script>

     <script type="text/javascript" src="scripts/geoxml3.js"></script>
     <script type="text/javascript" src="scripts/ProjectedOverlay.js"></script>

     <script type="text/javascript" src="scripts/jQueryRotate.2.2.js"></script>
     <script type="text/javascript" src="scripts/jquery.activity-indicator-1.0.0.js"></script>

     <script type="text/javascript" src="scripts/ExtDraggableObject.js"></script>
     <script type="text/javascript" src="scripts/trackTimeSlider.js"></script>
     <script type="text/javascript" src="scripts/infobox.js"></script>

     <script type="text/javascript" src="scripts/CSJSRequestObject.js"></script>

     <script type="text/javascript" src="scripts/fileUpload.js"></script>
     
     <script type="text/javascript" src="scripts/maplabel-compiled.js"></script>

     <script type="text/javascript" src="scripts/daynightoverlay.js"></script>

     <script type="text/javascript" src="scripts/nprogress.js"></script>
     <link rel="stylesheet" type="text/css" href="css/nprogress.css">

     <!-- Library for drawing error ellipse: 
     http://www.geocodezip.com/v3_example_eshapes_ellipse_fromBounds.html
     -->
     <script src="scripts/v3_eshapes.js" type="text/javascript"></script>

     <!-- Theme downloaded from http://jqueryui.com/download/#!zThemeParams=5d00000100f405000000000000003d8888d844329a8dfe02723de3e5701fa198449035fc0613ff729a37dd818cf92b1f6938fefa90282d04ae436bb72367f5909357c629e832248af2c086db4ab730aa4cced933a88449eca61db9f7f3b23d47f58a712d809b6088edfb34ad39fdc365386d0fa05a1ac3ecd320d2c989729f79ebdc6c6c1efbdad4c8411d498f009ffe98fe129da7602fb950113abdae4a76a6c41a4b54b4f82bb8821d6d431cd3fdd76b9d621596a2728b93385f2e7aaf8ea6603553343d43829941536e2bdd3ed7d7d3207364bf351633b31b934a71523a88fa2058cdd4c2e0778cd56d6ccac254ddace19ff4460a100e2e6a52830d9063c6e328cc3cb5e3d6dbe1077ae8b7cc5fa6414eafd15883b40c6c3e71647031ce3da7038a945a5628669fbe0e5139dad7ce99c00f25c2cd40569bd2fe1b2caed45bf2b8943f6ac17215bd54437a0f739009848e80f1d5c00d99870e7258d07402af6b22872fdf8f2892a7e9274aaa9181573ddd8cd7788511b4459e736d76b3e64e015809712e904499648868a11e35b3bb8ee1168d6039c5a86eee8cf545c877dbdd0111ab04ede46a85a17baed0958026fe23d2e490cfa504ab598731d779a2434fa164085379d31e1ff08e2eeb9475cce3d5b3e9b2fd4df43dffe6cf0eda -->
     <script type="text/javascript" src="scripts/jquery-ui-1.10.3.custom.js"></script>
     <link rel="stylesheet" href="css/custom-theme/jquery-ui-1.10.3.custom.css">
     <script>
        $(function() {
           $( "#accordion" ).accordion({
              collapsible: true,
              heightStyle: "fill"
           });
           $(window).resize(function(){
              $("#accordion").accordion("refresh");
           });           
        });
     </script>

     <script>
        $(function() {
           $('#busy_indicator').activity({segments: 8, steps: 3, opacity: 0.3, width: 4, space: 0, length: 5, color: '#fff', speed: 2.0});
        });
     </script>

     <script>
        $(function() {
           $( "#dialog" ).dialog({
              autoOpen: true,
              modal: true,
              hide: "fade",
           });
           setTimeout(function(){ $( "#dialog" ).dialog("close")}, 2000);
        });
     </script>

     <style>
        #feedback { font-size: 1em; }
        #selectable .ui-selecting { background: #FECA40; }
        #selectable .ui-selected { background: #F39814; color: white; }
        #selectable { list-style-type: none; margin: 0; padding: 0; width: 100%; }
        #selectable li { margin: 0px; padding: 0.5em; font-size: 1em; height: 10px; }
     </style>
     <script>
        $(function() {
           $( "#selectable" ).selectable({
              stop: function() { 
                 var result = [];
                 $( ".ui-selected", this ).each(function() {
                    var index = $( "#selectable li" ).index( this );
                    result.push( index + 1 );
                 });                 

                 clearOverlays();
                 clearAllTracks();
                 markersDisplayed = [];

                 if (markerArray) {
                    for (var i=0; i < markerArray.length; i++) {
                       if ($.inArray(i+1,result) != -1) {
                          markerArray[i].setMap(map);
                          var marker = markersQueried[i];
                          markersDisplayed.push(marker);
                       }
                    }
                 }
              }
           });           
        });
     </script>

     <script>
        //Select all text if query bar comes into focus
        $(document).ready(function() {
           $("#query:text").focus(function() { 
              $(this).one('mouseup', function(event){
                 event.preventDefault();
              }).select();
           });
           $("#geocodeAddress").focus(function() { 
              $(this).one('mouseup', function(event){
                 event.preventDefault();
              }).select();
           });
        });
     </script>

     <script>
        $(document).ready(function() {
           var $setupAlertDialog = $('#setup-alert-modal')
                       .dialog({
                          autoOpen: false,
                          title: 'Setup an Alert',
                          width: 700,
                          height: 500,
                          modal: false,
                          position: [90,110]
                       });
        });
     </script>

     <script>
        $(document).ready(function() {
           NProgress.configure({ 
              ease: 'ease', 
              trickleRate: 0.02,
              trickleSpeed: 50,
              showSpinner: false,
              minimum: 0.3,
           });
        });
     </script>
	 
     <!-- Main JavaScript for controlling map -->
     <script type="text/javascript" src='scripts/icode-maps.js' ></script>
	 
	
	<!-- Begin OWF Section -->
	<script>
	// Hide right side menu
	<!-- Check if OWF is running -->
	if( OWF.Util.isRunningInOWF() ) {
		
		function trackerInit() {
			// Hide right side menu
		/*	togglePanel();			
			$("#showpanel").unbind('click');
			$("#showpanel").html("");
		*/	
			// Add channel listeners for other widgets in OWF
			/*
			OWF.Eventing.subscribe("queryChannel", this.updateQuery);
			OWF.Eventing.subscribe("legend_radarvessels", this.updateLegend_radarvessels);
			OWF.Eventing.subscribe("legend_livelaisic", this.updateLegend_livelaisic);
			OWF.Eventing.subscribe("legend_allships", this.updateLegend_allships);
			OWF.Eventing.subscribe("legend_unspecifiedships", this.updateLegend_unspecifiedships);
			OWF.Eventing.subscribe("legend_fishing", this.updateLegend_fishing);
			OWF.Eventing.subscribe("legend_towing", this.updateLegend_towing);
			OWF.Eventing.subscribe("legend_bigtow", this.updateLegend_bigtow);
			OWF.Eventing.subscribe("legend_military", this.updateLegend_military);
			OWF.Eventing.subscribe("legend_pleasurecraft", this.updateLegend_pleasurecraft);
			OWF.Eventing.subscribe("legend_searchandrescue", this.updateLegend_searchandrescue);
			OWF.Eventing.subscribe("legend_tug", this.updateLegend_tug);
			OWF.Eventing.subscribe("legend_dredge", this.updateLegend_dredge);
			OWF.Eventing.subscribe("legend_pilot", this.updateLegend_pilot);
			OWF.Eventing.subscribe("legend_lawenforcement", this.updateLegend_lawenforcement);
			OWF.Eventing.subscribe("legend_passengervessels", this.updateLegend_passengervessels);
			OWF.Eventing.subscribe("legend_cargovessels", this.updateLegend_cargovessels);
			OWF.Eventing.subscribe("legend_tankers", this.updateLegend_tankers);
			OWF.Eventing.subscribe("legend_risk", this.updateLegend_risk);
			OWF.Eventing.subscribe("layerTypes_toggleTMACSHeadWMSLayer", this.updateLayerTypes_toggleTMACSHeadWMSLayer);
			OWF.Eventing.subscribe("layerTypes_toggleTMACSHistoryWMSLayer", this.updateLayerTypes_toggleTMACSHistoryWMSLayer);
			OWF.Eventing.subscribe("layerTypes_toggleCountryBorders", this.updateLayerTypes_toggleCountryBorders);
			OWF.Eventing.subscribe("layerTypes_toggleCluster", this.updateLayerTypes_toggleCluster);
			OWF.Eventing.subscribe("layerTypes_toggleEEZLayer", this.updateLayerTypes_toggleEEZLayer);
			OWF.Eventing.subscribe("layerTypes_toggleWeatherLayer", this.updateLayerTypes_toggleWeatherLayer);
			OWF.Eventing.subscribe("layerTypes_togglePortLayer", this.updateLayerTypes_togglePortLayer);
			OWF.Eventing.subscribe("layerTypes_toggleHeatmapLayer", this.updateLayerTypes_toggleHeatmapLayer);
			OWF.Eventing.subscribe("timeMachine_toggleTimeMachine", this.updateTimeMachine_toggleTimeMachine);
			OWF.Eventing.subscribe("otherOptions_toggleShowNames", this.updateOtherOptions_toggleShowNames);
			OWF.Eventing.subscribe("otherOptions_toggleDistanceTool", this.updateOtherOptions_toggleDistanceTool);
			OWF.Eventing.subscribe("otherOptions_toggleIHSTabs", this.updateOtherOptions_toggleIHSTabs);
			OWF.Eventing.subscribe("otherOptions_vessel_age_changed", this.updateOtherOptions_vessel_age_changed);
			OWF.Eventing.subscribe("otherOptions_history_trail_length_changed", this.updateOtherOptions_history_trail_length_changed);
			OWF.Eventing.subscribe("otherOptions_toggleTrackIcons", this.updateOtherOptions_toggleTrackIcons);
			OWF.Eventing.subscribe("otherOptions_toggleQueryAllTracks", this.updateOtherOptions_toggleQueryAllTracks);
			OWF.Eventing.subscribe("otherOptions_toggleAutoRefresh", this.updateOtherOptions_toggleAutoRefresh);
			OWF.Eventing.subscribe("otherOptions_refresh_rate_changed", this.updateOtherOptions_refresh_rate_changed);
			OWF.Eventing.subscribe("otherOptions_reload_delay_changed", this.updateOtherOptions_reload_delay_changed);
			OWF.Eventing.subscribe("otherOptions_toggleNeverAutoRefresh", this.updateOtherOptions_toggleNeverAutoRefresh);
			OWF.Eventing.subscribe("otherOptions_toggleDayNightOverlay", this.updateOtherOptions_toggleDayNightOverlay);
			OWF.Eventing.subscribe("setupAlerts_setupAlertInitialize", this.updateSetupAlerts_setupAlertInitialize);
			*/
			OWF.Eventing.subscribe("queryBuilder", this.updateQuery);
		}

		var updateQuery = function(sender, msg) {
			console.log("QUERY BUILDER:"+msg);
			$('#query').val(msg);
			
			// simulate "enter" keypress
			var e = jQuery.Event("keypress");
			e.which = 13;
			e.keyCode = 13;
			$('#query').trigger(e);
		}
		/*
		// Event handlers for each Legend Channel
		var updateLegend_radarvessels = function(sender, msg) {
			if (msg) {
				$("#radarvessels").prop("checked", true);			
			} else {
				$("#radarvessels").prop("checked", false);
			}
			refreshMaps(true);
		}; 
		
		var updateLegend_livelaisic = function(sender, msg) { 
			if (msg) {
				$("#livelaisic").prop("checked", true);			
			} else {
				$("#livelaisic").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_allships = function(sender, msg) { 
			if (msg) {
				$("#All Ships").prop("checked", true);			
			} else {
				$("#All Ships").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_unspecifiedships = function(sender, msg) { 
			if (msg) {
				$("#0-Unspecified Ships").prop("checked", true);			
			} else {
				$("#0-Unspecified Ships").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_fishing = function(sender, msg) { 
			if (msg) {
				$("#30-Fishing").prop("checked", true);			
			} else {
				$("#30-Fishing").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_towing = function(sender, msg) { 
			if (msg) {
				$("#31-Towing").prop("checked", true);			
			} else {
				$("#31-Towing").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_bigtow = function(sender, msg) { 
			if (msg) {
				$("#32-Big Tow").prop("checked", true);			
			} else {
				$("#32-Big Tow").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_military = function(sender, msg) { 
			if (msg) {
				$("#35-Military").prop("checked", true);			
			} else {
				$("#35-Military").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_pleasurecraft = function(sender, msg) { 
			if (msg) {
				$("#37-Pleasure Craft").prop("checked", true);			
			} else {
				$("#37-Pleasure Craft").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_searchandrescue = function(sender, msg) { 
			if (msg) {
				$("#51-Search and Rescue").prop("checked", true);			
			} else {
				$("#51-Search and Rescue").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_tug = function(sender, msg) { 
			if (msg) {
				$("#52-Tug").prop("checked", true);			
			} else {
				$("#52-Tug").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_dredge = function(sender, msg) { 
			if (msg) {
				$("#33-Dredge").prop("checked", true);			
			} else {
				$("#33-Dredge").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_pilot = function(sender, msg) { 
			if (msg) {
				$("#50-Pilot").prop("checked", true);			
			} else {
				$("#50-Pilot").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_lawenforcement = function(sender, msg) { 
			if (msg) {
				$("#55-Law Enforcement").prop("checked", true);			
			} else {
				$("#55-Law Enforcement").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_passengervessels = function(sender, msg) { 
			if (msg) {
				$("#6x-Passenger Vessels").prop("checked", true);			
			} else {
				$("#6x-Passenger Vessels").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_cargovessels = function(sender, msg) { 
			if (msg) {
				$("#7x-Cargo Vessels").prop("checked", true);			
			} else {
				$("#7x-Cargo Vessels").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_tankers = function(sender, msg) { 
			if (msg) {
				$("#8x-Tankers").prop("checked", true);			
			} else {
				$("#8x-Tankers").prop("checked", false);
			}
			refreshMaps(true);
		};
		
		var updateLegend_risk = function(sender, msg) { 
			if (msg) {
				$("#Risk").prop("checked", true);			
			} else {
				$("#Risk").prop("checked", false);
			}
			toggleRisk();
			refreshMaps(true);
		};
		
		// Event handlers for each Layer Types Channel
		var updateLayerTypes_toggleTMACSHeadWMSLayer = function(sender, msg) {
			if (msg) {
				$("#TMACShead").prop("checked", true);			
			} else {
				$("#TMACShead").prop("checked", false);
			}
			toggleTMACSHeadWMSLayer(); 
		};
		
		var updateLayerTypes_toggleTMACSHistoryWMSLayer = function(sender, msg) {
			if (msg) {
				$("#TMACShistory").prop("checked", true);			
			} else {
				$("#TMACShistory").prop("checked", false);
			}
			toggleTMACSHistoryWMSLayer(); 
		};
		
		var updateLayerTypes_toggleCountryBorders = function(sender, msg) {
			if (msg) {
				$("#enableCountryBorders").prop("checked", true);			
			} else {
				$("#enableCountryBorders").prop("checked", false);
			}
			toggleCountryBorders(); 
		};
		
		var updateLayerTypes_toggleCluster = function(sender, msg) {
			if (msg) {
				$("#enableCluster").prop("checked", true);			
			} else {
				$("#enableCluster").prop("checked", false);
			}
			toggleCluster(); 
		};
		
		var updateLayerTypes_toggleEEZLayer = function(sender, msg) {
			if (msg) {
				$("#EEZLayer").prop("checked", true);			
			} else {
				$("#EEZLayer").prop("checked", false);
			}
			toggleEEZLayer(); 
		};
		
		var updateLayerTypes_toggleWeatherLayer = function(sender, msg) {
			if (msg) {
				$("#WeatherLayer").prop("checked", true);			
			} else {
				$("#WeatherLayer").prop("checked", false);
			}
			toggleWeatherLayer(); 
		};
		
		var updateLayerTypes_togglePortLayer = function(sender, msg) {
			if (msg) {
				$("#PortLayer").prop("checked", true);			
			} else {
				$("#PortLayer").prop("checked", false);
			}
			togglePortLayer(); 
		};
		
		var updateLayerTypes_toggleHeatmapLayer = function(sender, msg) {
			if (msg) {
				$("#HeatmapLayer").prop("checked", true);			
			} else {
				$("#HeatmapLayer").prop("checked", false);
			}
			toggleHeatmapLayer(); 
		};
		
		// Event handlers for each Time machine Channel
		var updateTimeMachine_toggleTimeMachine = function(sender, msg) {
			if (msg) {
				$("#enabletimemachine").prop("checked", true);			
			} else {
				$("#enabletimemachine").prop("checked", false);
			}
			toggleTimeMachine(); 
		};
		
		// Event handlers for each Other Options Channel
		var updateOtherOptions_toggleShowNames = function(sender, msg) {
			if (msg) {
				$("#showvesselnames").prop("checked", true);			
			} else {
				$("#showvesselnames").prop("checked", false);
			}
			toggleShowNames(); 
		};
		
		var updateOtherOptions_toggleDistanceTool = function(sender, msg) {
			if (msg) {
				$("#distancetooltoggle").prop("checked", true);			
			} else {
				$("#distancetooltoggle").prop("checked", false);
			}
			toggleDistanceTool(); 
		};
		
		var updateOtherOptions_toggleIHSTabs = function(sender, msg) {
			if (msg) {
				$("#IHSTabs").prop("checked", true);			
			} else {
				$("#IHSTabs").prop("checked", false);
			}
			toggleIHSTabs(); 
		};
		
		var updateOtherOptions_vessel_age_changed = function(sender, msg) {
			switch(msg) {
				case 'no limit': $('#vessel_age').val('no limit'); break;
				case '0.0833333333333333': $('#vessel_age').val('0.0833333333333333'); break;
				case '0.25': $('#vessel_age').val('0.25'); break;
				case '1': $('#vessel_age').val('1'); break;
				case '2': $('#vessel_age').val('2'); break;
				case '3': $('#vessel_age').val('3'); break;
				case '4': $('#vessel_age').val('4'); break;
				case '5': $('#vessel_age').val('5'); break;
				case '6': $('#vessel_age').val('6'); break;
				case '7': $('#vessel_age').val('7'); break;
				case '8': $('#vessel_age').val('8'); break;
				case '9': $('#vessel_age').val('9'); break;
				case '10': $('#vessel_age').val('10'); break;
				case '11': $('#vessel_age').val('11'); break;
				case '12': $('#vessel_age').val('12'); break;
				case '24': $('#vessel_age').val('24'); break;
				case '48': $('#vessel_age').val('48'); break;
				case '72': $('#vessel_age').val('72'); break;
				default: $('#vessel_age').val('0.0833333333333333'); break;
			}
			
			vessel_age_changed(true); 	
		};
		
		var updateOtherOptions_history_trail_length_changed = function(sender, msg) {
			switch(msg) {
				case 'no limit': $('#history_trail_length').val('no limit'); break;
				case '0.25': $('#history_trail_length').val('0.25'); break;
				case '0.5': $('#history_trail_length').val('0.5'); break;
				case '1': $('#history_trail_length').val('1'); break;
				case '2': $('#history_trail_length').val('2'); break;
				case '3': $('#history_trail_length').val('3'); break;
				case '4': $('#history_trail_length').val('4'); break;
				case '5': $('#history_trail_length').val('5'); break;
				case '6': $('#history_trail_length').val('6'); break;
				case '7': $('#history_trail_length').val('7'); break;
				case '8': $('#history_trail_length').val('8'); break;
				case '9': $('#history_trail_length').val('9'); break;
				case '10': $('#history_trail_length').val('10'); break;
				case '11': $('#history_trail_length').val('11'); break;
				case '12': $('#history_trail_length').val('12'); break;
				case '13': $('#history_trail_length').val('13'); break;
				case '14': $('#history_trail_length').val('14'); break;
				case '15': $('#history_trail_length').val('15'); break;
				case '31': $('#history_trail_length').val('31'); break;
				default: $('#history_trail_length').val('0.25'); break;
			}
			
			history_trail_length_changed(); 	
		};
		
		var updateOtherOptions_toggleTrackIcons = function(sender, msg) {
			if (msg) {
				$("#showtrackicons").prop("checked", true);			
			} else {
				$("#showtrackicons").prop("checked", false);
			}
			toggleIHSTabs(); 
		};
		
		var updateOtherOptions_toggleQueryAllTracks = function(sender, msg) {
			if (msg) {
				$("#queryalltracks").prop("checked", true);			
			} else {
				$("#queryalltracks").prop("checked", false);
			}
			toggleIHSTabs(); 
		};

		var updateOtherOptions_toggleAutoRefresh = function(sender, msg) {
			if (msg) {
				$("#autoRefresh").prop("checked", true);			
			} else {
				$("#autoRefresh").prop("checked", false);
			}
			toggleAutoRefresh(); 
		};
		
		var updateOtherOptions_refresh_rate_changed = function(sender, msg) {
			switch(msg) {
				case '0.16': $('#refresh_rate').val('0.16'); break;
				case '0.5': $('#refresh_rate').val('0.5'); break;
				case '1': $('#refresh_rate').val('1'); break;
				case '5': $('#refresh_rate').val('5'); break;
				default: $('#refresh_rate').val('5'); break;
			}
			refresh_rate_changed(true);
		};
		
		var updateOtherOptions_reload_delay_changed = function(sender, msg) {
			switch(msg) {
				case '0': $('#reload_delay').val('0'); break;
				case '1': $('#reload_delay').val('1'); break;
				case '3': $('#reload_delay').val('2'); break;
				case '3': $('#reload_delay').val('3'); break;
				default: $('#reload_delay').val('0'); break;
			}
			reload_delay_changed();	
		};

		var updateOtherOptions_toggleNeverAutoRefresh = function(sender, msg) {
			if (msg) {
				$("#neverRefresh").prop("checked", true);			
			} else {
				$("#neverRefresh").prop("checked", false);
			}
			toggleNeverAutoRefresh();
		};		
		
		var updateOtherOptions_toggleDayNightOverlay = function(sender, msg) {
			if (msg) {
				$("#showdaynightoverlay").prop("checked", true);			
			} else {
				$("#showdaynightoverlay").prop("checked", false);
			}
			toggleDayNightOverlay();
		};
		
		// Event handlers for Setup Alerts Channels
		var updateSetupAlerts_setupAlertInitialize = function(sender, msg) {	
			var fn = new Function("return " + msg);
			fn;
		};
		*/
		
		// add OWF Eventing API on page load
		owfdojo.addOnLoad(function() { 
			OWF.ready(trackerInit); 
		}); 
	}
	 </script>
	 <!-- End OWF Section -->
	 
  </head>

  <body onload="initialize()">

     <!--
     <div id="dialog" title="Welcome to ICODE-MDA Maps">
        <p>Use the query bar for SQL searches and the side menu for options. <br>
        Message will disappear in 2 seconds...</p>
     </div>
     -->

     <div id="panel_top">
        <div id="logo">
           <h2><a style="color: rgb(255,255,255)" href=".">ICODE-MDA</a></h2>
        </div>
        <div id="top_nav">
           <div>
              <form name="query_form"><input id="query" type="text" name="query" style="width:100%" onkeypress="if (event.which == 13) {enteredQuery();return false;}" value="QUERY RUNNING..."><input hidden="true" type="hidden"></form>
           </div>
        </div>
        <div id="stats_nav">
           <!-- result count and query time to be shown here -->
        </div>
     </div>

     <div id="container">
        <!-- BEGIN LEFT PANEL -->  
        <div id="panel">

           <div id="accordion" class="accordion">
              <h3>Legend</h3>
              <div id="vessel_types">
                 <center><b>Vessel Types</b></center>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#3333FF;stroke:#3333FF;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 LAISIC AIS Observation<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="20" width="30" viewBox="-5 -10 20 20">
                 <path d="m -6 0 6 -6 6 6 -6 6 z m 12 0 l 8 0" style="fill:#FFFF00;stroke:#222222;stroke-width:1;fill-rule:evenodd;">Browser does not support inline SVG.
                 </path>
                 </svg>
                 LAISIC AIS Track<br>
                 <input class="checkboxtype" id="radarvessels" name="radarvessels" checked="checked" type="checkbox" onclick="refreshMaps(true);"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="16" width="30" viewBox="-6 -12 15 16">
                 <path d="M 0, -3 m -6, 0 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0 m 8 0 l 10 0" style="fill:#F078FF;stroke:#222200;stroke-width:1;fill-rule:evenodd;">Browser does not support inline SVG.
                 </path>
                 </svg>
                 RADAR Vessels<br>
                 <input class="checkboxtype" id="livelaisic" name="livelaisic" checked="checked" type="checkbox" onclick="refreshMaps(true);">
                 <svg width="26" height="15" version="1.1" xmlns="https://svgwg.org/svg2-draft/"  viewBox="0 3 20 10"><path d="M 12,0 22,15 19,21 12,24 6,21 3,15 Z" fill="#FF0000" stroke="#000000" stroke-width="3" transform="rotate(90 6 6) scale(0.5) translate(5 -4)"></path></svg>
                 Live LAISIC Correlations<br>
                 <input class="checkboxallships" id="All Ships" name="All Ships" checked="false" type="checkbox" onclick="typeSelectedAllShips();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#444444;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 All Ships<br>
                 <input class="checkboxtype" id="0-Unspecified Ships" name="0-Unspecified Ships" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#F78181;stroke:#780202;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 0 - Unspecified Ships<br>
                 <input class="checkboxtype" id="30-Fishing" name="30-Fishing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DFD7;stroke:#006058;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 30 - Fishing<br>
                 <input class="checkboxtype" id="31-Towing" name="31-Towing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 31 - Towing<br>
                 <input class="checkboxtype" id="32-Big Tow" name="32-Big Tow" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 32 - Big Tow<br>
                 <input class="checkboxtype" id="35-Military" name="35-Military" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#0000FF;stroke:#000080;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 35 - Military<br>
                 <input class="checkboxtype" id="37-Pleasure Craft" name="37-Pleasure Craft" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#8904B1;stroke:#0a0032;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 37 - Pleasure Craft<br>
                 <input class="checkboxtype" id="51-Search and Rescue" name="51-Search and Rescue" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#BE3C14;stroke:#3f0000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 51 - Search & Rescue<br>
                 <input class="checkboxtype" id="52-Tug" name="52-Tug" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 52 - Tug<br>
                 <input class="checkboxtype" id="33-Dredge" name="33-Dredge" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 33 - Dredge<br>
                 <input class="checkboxtype" id="50-Pilot" name="50-Pilot" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 50 - Pilot<br>
                 <input class="checkboxtype" id="55-Law Enforcement" name="55-Law Enforcement" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#0000FF;stroke:#000080;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 55 - Law Enforcement<br>
                 <input class="checkboxtype" id="6x-Passenger Vessels" name="6x-Passenger Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 6x - Passenger Vessels<br>
                 <input class="checkboxtype" id="7x-Cargo Vessels" name="7x-Cargo Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 7x - Cargo Vessels<br>
                 <input class="checkboxtype" id="8x-Tankers" name="8x-Tankers" checked="checked"  type="checkbox" onclick="typeSelectUpdated();"> 
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 8x - Tankers<br>
                 <hr>
                 <center><b>Risk Level</b><br>(vessel outline)</center>
                 <input class="checkbox" id="Risk" name="Risk" type="checkbox" onclick="toggleRisk();refreshMaps(true);"> Enable risk information<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#00F014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 Low Risk<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#F0FF78;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 Medium Risk<br>
                 <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                 <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#FF0014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                 </path>
                 </svg>
                 High Risk<br>
              </div>

              <h3>Layer Types</h3>
              <div id="layer_types">
                 <div id="tmacslayer">
                    <center><b>TMACS WMS</b></center>
                    <input class="checkbox" id="TMACShead" name="TMACShead" type="checkbox" onclick="toggleTMACSHeadWMSLayer();"> TMAC Trackheads<br>
                    <input class="checkbox" id="TMACShistory" name="TMACShistory" type="checkbox" onclick="toggleTMACSHistoryWMSLayer();"> Track History<br>
                 </div>
                 <br>
                 <hr>
                 <center><b>Other Information</b></center>
                 <input class="checkbox" id="enableCountryBorders" name="enableCountryBorders" type="checkbox" onclick="toggleCountryBorders();"> Enable country borders<br>
                 <input class="checkbox" id="enableCluster" name="Enable Clusters" type="checkbox" checked="checked" onclick="toggleCluster(true);"> Enable Clusters when zoomed out<br>
                 <!-- <input class="checkbox" id="HeatmapLayer" name="HeatmapLayer" type="checkbox" onclick="toggleHeatmapLayer();"> <img align="top" width="20px" src="icons/heatmap.png" style="padding-bottom: 4px; vertical-align: middle;"> Heatmap Layer<br> -->
                 <input class="checkbox" id="EEZLayer" name="EEZLayer" type="checkbox" onclick="toggleEEZLayer();"> EEZ Layer<br>
                 <input class="checkbox" id="WeatherLayer" name="WeatherLayer" type="checkbox" onclick="toggleWeatherLayer();"> <img align="top" width="20px" src="icons/weather_icon.png" style="padding-bottom: 4px; vertical-align: middle;"> Weather Layer<br>
                 <!-- input class="checkbox" id="KMLLayer" name="KMLLayer" type="checkbox" onclick="toggleKMLLayer();"> <img align="top" width="20px" src="icons/kml.png" style="padding-bottom: 4px; vertical-align: middle;"> KML Layer<br> -->
                 <input class="checkbox" id="PortLayer" name="PortLayer" type="checkbox" onclick="togglePortLayer();"> <img align="top" height="20px" src="icons/anchor_port.png" style="padding-bottom: 4px; vertical-align: middle;"> Port Layer<br>
                 <input class="checkbox" id="HeatmapLayer" name="HeatmapLayer" type="checkbox" onclick="toggleHeatmapLayer();"> Heatmap Layer<br>
                 </p>
              </div>

              <h3>LAISIC Tables</h3>
              <div>
                 <input class="checkbox" id="LAISIC_TARGETS" name="LAISIC_TARGETS" type="checkbox" onclick="refreshMaps(true);"> Display LAISIC targets<br><br>
                 <center><a href="laisictables.html" target="_blank">Click here to open <br>LAISIC Tables in a new window</a></center>
                 <br>
                 <input class="checkbox" id="error ellipses" name="error ellipses" type="checkbox" checked="checked" onclick=";"> Draw error ellipses on trackicons<br><br>
              </div>

              <h3>Upload KMZ</h3>
              <div>
                 Upload KMZ: <br />
                 <form id="kmlform" >
                    <input class="inputfilebutton" type="file" name="file" size="5" />
                    <input class="inputfilebutton" type="button" onClick="fileUpload(this.form,'kml/kmzextract.php','upload'); return false;" value="Upload">
                 </form>
                 <div id="upload"></div>
              </div>

              <h3>Time Machine</h3>
              <div>
                 <input class="checkbox" id="enabletimemachine" name="Enable Time Machine" type="checkbox" onclick="toggleTimeMachine();"> Enable Time Machine
                 <br>
                 <br>
                 <!-- http://trentrichardson.com/examples/timepicker/ -->
                 <script src="scripts/jquery-ui-timepicker-addon-cus.js"></script>
                 <script>
                    $(function() {
                       $('#datetimestart').datetimepicker({timeFormat: 'hh:mm tt z'});
                       $('#datetimeend').datetimepicker({timeFormat: 'hh:mm tt z'});
                    });
                 </script>
                 Pick a date range:
                 <p align="center">
                 <input type="text" id="datetimestart" size="18" />
                 <br /> to <br />
                 <input type="text" id="datetimeend" size="18" />

                 <br />
                 <br />
                 <input id="queryTimeMachineButton" type="button" onClick="if ($('#datetimestart').datetimepicker('getDate') == null || $('#datetimeend').datetimepicker('getDate') == null) {$('#datetimestart').datetimepicker('setDate', (new Date(Math.round(new Date().getTime()/1000/86400)*86400*1000 + new Date().getTimezoneOffset()*60*1000 - 86400*1000)));$('#datetimeend').datetimepicker('setDate', (new Date(Math.round(new Date().getTime()/1000/86400)*86400*1000 + new Date().getTimezoneOffset()*60*1000)));} TimeMachineLookup(($('#datetimestart').datetimepicker('getDate').getTime()/1000), ($('#datetimeend').datetimepicker('getDate').getTime()/1000)); return false;" value="Query">
                 </p>
                 Filtering MMSI: <input id="filterMMSITimeMachine" type="textbox" value="Enter MMSI to filter" onClick="document.getElementById('filterMMSITimeMachine').value= '';" onkeydown="if (event.keyCode == 13) {$('#queryTimeMachineButton').trigger('click');}"><br>
                 Custom filter: <input id="customQueryTimeMachine" type="textbox" value="i.e. 'SOG < 1'" onClick="document.getElementById('customQueryTimeMachine').value= '';" onkeydown="if (event.keyCode == 13) {$('#queryTimeMachineButton').trigger('click');}"><br>
              </div>

              <h3>Other Options</h3>
              <div>
                 <!--
                 <form id="distancetoolform" >
                    <input class="inputfilebutton" id="distancetooltoggle" type="button" onClick="toggleDistanceTool();" value="Enable distance tool">
                 </form>
                 -->
                 <input class="checkbox" id="showvesselnames" name="Show Vessel Names" type="checkbox" checked="checked" onclick="toggleShowNames();"> Show vessel names<br>
                 <input class="checkbox" id="distancetooltoggle" name="distancetooltoggle" type="checkbox" onclick="toggleDistanceTool();"> Enable distance tool<br>
                 <input class="checkbox" id="IHSTabs" name="IHSTabs" type="checkbox" onclick="toggleIHSTabs();"> Enable IHS Tabs<br>
                 <hr>
                 Only show vessels up to 
                 <select id="vessel_age" onChange="vessel_age_changed(true);">
                    <option value="no limit">No limit</option>
                    <option value="0.0833333333333333">5 mins</option>
                    <option value="0.25" selected="selected">15 mins</option>
                    <option value="1">1 hours</option>
                    <option value="2">2 hours</option>
                    <option value="3">3 hours</option>
                    <option value="4">4 hours</option>
                    <option value="5">5 hours</option>
                    <option value="6">6 hours</option>
                    <option value="7">7 hours</option>
                    <option value="8">8 hours</option>
                    <option value="9">9 hours</option>
                    <option value="10">10 hours</option>
                    <option value="11">11 hours</option>
                    <option value="12">12 hours</option>
                    <option value="24">24 hours</option>
                    <option value="48">48 hours</option>
                    <option value="72">72 hours</option>
                 </select>
                 <hr>
                 History trail length: 
                 <select id="history_trail_length" onChange="history_trail_length_changed();">
                    <option value="no limit">No limit</option>
                    <option value="0.25" selected="selected">6 hours</option>
                    <option value="0.5" selected="selected">12 hours</option>
                    <option value="1" selected="selected">1 day</option>
                    <option value="2">2 days</option>
                    <option value="3">3 days</option>
                    <option value="4">4 days</option>
                    <option value="5">5 days</option>
                    <option value="6">6 days</option>
                    <option value="7">7 days</option>
                    <option value="8">8 days</option>
                    <option value="9">9 days</option>
                    <option value="10">10 days</option>
                    <option value="11">11 days</option>
                    <option value="12">12 days</option>
                    <option value="13">13 days</option>
                    <option value="14">14 days</option>
                    <option value="15">15 days</option>
                    <option value="31">31 days</option>
                 </select>
                 <br>
                 <input class="checkbox" id="showtrackicons" name="showtrackicons" type="checkbox" checked="checked" onclick="toggleTrackIcons();"> Enable track icons<br>
                 <input class="checkbox" id="queryalltracks" name="queryalltracks" type="checkbox" onclick="toggleQueryAllTracks();"> Query tracks for vessels in view<br>
                 <hr>
                 <div id="refreshoptions">
                    <input class="checkbox" id="autoRefresh" name="autoRefresh" type="checkbox" checked="checked" onclick="toggleAutoRefresh();"> Automatically refresh (1 min)<br>
                    Auto-refresh rate: 
                    <select id="refresh_rate" onChange="refresh_rate_changed(true);">
                       <option value="0.16">10 seconds</option>
                       <option value="0.5">30 seconds</option>
                       <option value="1" selected="selected">1 minute</option>
                       <option value="5">5 minutes</option>
                    </select><br>                 
                    Reload delay: 
                    <select id="reload_delay" onChange="reload_delay_changed();">
                       <option value="0" selected="selected">0</option>
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                    </select> seconds<br>
                 </div>
                 <input class="checkbox" id="neverRefresh" name="neverRefresh" type="checkbox" onclick="toggleNeverAutoRefresh();"> Never refresh unless manually triggered (by hitting spacebar)<br>
                 <hr>
                 Vessel Icon Size: 
                 <input type="button" onclick="decreaseVesselIconSize()" value="-"></input>
                 <input type="button" onclick="increaseVesselIconSize()" value="+"></input>
                 <input type="button" onclick="resetVesselIconSize()" value="Reset"></input>
                 <hr>

                 <input class="checkbox" id="showdaynightoverlay" name="Show Day/Night Overlay" type="checkbox" onclick="toggleDayNightOverlay();"> Show Day/Night Overlay<br>
                 <hr>
                 <p>
                 <b>Hidden Tricks:</b><br>
                 <ul>
                    <li>Right click a target to quickly acquire track history.</li>
                    <li>Right click track history to delete.</li>
                    <li>Don't query tracks for vessels in view if many vessels are in view!</li>
                    <li>Click the black vertical bar on the right to hide this menu.</li>
                    <li>Click anywhere on the map to hide a visible infoBubble.</li>
                    <li>Click on track history markers to display dead-reckoning prediction to next point in history.</li>
                    <li>Press '?' for Keyboard shortcuts.</li>
                 </ul>
              </div>

              <h3>Geofencing Notifications</h3>
              <div>
                 <p align=center>
                    Setup your email alerts here.
                    <br>
                    <input id="setupAlert" type="button" onClick="setupAlertInitialize(); return false;" value="Setup Alert">
                 </p>
              </div>
           </div>
           <!-- END ACCORDION -->

        </div>
        <!-- END LEFT PANEL -->  

        <!-- BEGIN MAP AREA -->
        <div id="map_canvas">
        </div> 
        <!-- END MAP AREA -->

        <div id="showpanel" onmouseover="" style="cursor: pointer;">
           ><br>><br>>
        </div>
     </div>

     <div id="busy_indicator"><div style="width: 32px; height: 32px;"></div></div>

     <div id="shipdetails">
     </div>

     <div id="latlong">
     </div>

     <div id="lastUpdated">
        <div id="lastUpdatedText"></div>
     </div>

     <div id="status-msg">
        Currently showing RADAR and raw full AIS
     </div>

     <div id="keyboard-shortcut-modal" title="Keyboard Shortcuts">
        <p>
        <pre>
           <b>?</b>&#9;&#9; Display this shortcut dialog box<br>
           <b>Spacebar</b>&#9; Refresh targets in current view<br>
           <b>A</b>&#9;&#9; Toggle auto-refresh targets<br>
           <b>C</b>&#9;&#9; Clear all tracks<br>
           <b>G</b>&#9;&#9; Toggle clustering<br>
           <b>H</b>&#9;&#9; Hide/show menu panel<br>
           <b>L</b>&#9;&#9; Toggle LAISIC/AIS targets<br>
           <b>N</b>&#9;&#9; Toggle showing vessel names<br>
           <b>P</b>&#9;&#9; Toggle port layer<br>
           <b>Q</b>&#9;&#9; Select the query bar<br>
           <b>R</b>&#9;&#9; Refresh browser<br>
           <b>W</b>&#9;&#9; Toggle weather layer<br>
           <b>-</b>&#9;&#9; Zoom out<br>
           <b>+</b>&#9;&#9; Zoom in<br>
           <b>Arrows keys</b>&#9; Pan around map<br>
           <b>ESC</b>&#9;&#9; Close this dialog box<br></pre>
        </p>
     </div>

     <div id="setup-alert-modal">
        <!-- Content here defined in separate alerts/setup-alerts.html file -->
     </div>


     <div id="geocodepanel">
        <input id="geocodeAddress" type="textbox" value="San Diego, CA">
        <input type="button" value="Set Map Center" onclick="codeAddress()">
     </div>

  </body>
</html>

